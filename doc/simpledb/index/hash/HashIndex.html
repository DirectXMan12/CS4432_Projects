<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Sat Feb 04 21:12:08 EST 2012 -->
<title>HashIndex</title>
<meta name="date" content="2012-02-04">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HashIndex";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HashIndex.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?simpledb/index/hash/HashIndex.html" target="_top">Frames</a></li>
<li><a href="HashIndex.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb.index.hash</div>
<h2 title="Class HashIndex" class="title">Class HashIndex</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.index.hash.HashIndex</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">HashIndex</span>
extends java.lang.Object
implements <a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></pre>
<div class="block">A static hash implementation of the Index interface.
 A fixed number of buckets is allocated (currently, 100),
 and each bucket is implemented as a file of index records.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Edward Sciore</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#idxname">idxname</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#NUM_BUCKETS">NUM_BUCKETS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a></code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#sch">sch</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a></code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#searchkey">searchkey</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../simpledb/query/TableScan.html" title="class in simpledb.query">TableScan</a></code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#ts">ts</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#tx">tx</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#HashIndex(java.lang.String, simpledb.record.Schema, simpledb.tx.Transaction)">HashIndex</a></strong>(java.lang.String&nbsp;idxname,
         <a href="../../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a>&nbsp;sch,
         <a href="../../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</code>
<div class="block">Opens a hash index for the specified index.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#beforeFirst(simpledb.query.Constant)">beforeFirst</a></strong>(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;searchkey)</code>
<div class="block">Positions the index before the first index record
 having the specified search key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#close()">close</a></strong>()</code>
<div class="block">Closes the index by closing the current table scan.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#delete(simpledb.query.Constant, simpledb.record.RID)">delete</a></strong>(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;val,
      <a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a>&nbsp;rid)</code>
<div class="block">Deletes the specified record from the table scan for
 the bucket.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a></code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#getDataRid()">getDataRid</a></strong>()</code>
<div class="block">Retrieves the dataRID from the current record
 in the table scan for the bucket.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#insert(simpledb.query.Constant, simpledb.record.RID)">insert</a></strong>(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;val,
      <a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a>&nbsp;rid)</code>
<div class="block">Inserts a new record into the table scan for the bucket.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#next()">next</a></strong>()</code>
<div class="block">Moves to the next record having the search key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/index/hash/HashIndex.html#searchCost(int, int)">searchCost</a></strong>(int&nbsp;numblocks,
          int&nbsp;rpb)</code>
<div class="block">Returns the cost of searching an index file having the
 specified number of blocks.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NUM_BUCKETS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NUM_BUCKETS</h4>
<pre>public static&nbsp;int NUM_BUCKETS</pre>
</li>
</ul>
<a name="idxname">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>idxname</h4>
<pre>private&nbsp;java.lang.String idxname</pre>
</li>
</ul>
<a name="sch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sch</h4>
<pre>private&nbsp;<a href="../../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a> sch</pre>
</li>
</ul>
<a name="tx">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tx</h4>
<pre>private&nbsp;<a href="../../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a> tx</pre>
</li>
</ul>
<a name="searchkey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchkey</h4>
<pre>private&nbsp;<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a> searchkey</pre>
</li>
</ul>
<a name="ts">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ts</h4>
<pre>private&nbsp;<a href="../../../simpledb/query/TableScan.html" title="class in simpledb.query">TableScan</a> ts</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HashIndex(java.lang.String, simpledb.record.Schema, simpledb.tx.Transaction)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HashIndex</h4>
<pre>public&nbsp;HashIndex(java.lang.String&nbsp;idxname,
         <a href="../../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a>&nbsp;sch,
         <a href="../../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</pre>
<div class="block">Opens a hash index for the specified index.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>idxname</code> - the name of the index</dd><dd><code>sch</code> - the schema of the index records</dd><dd><code>tx</code> - the calling transaction</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="beforeFirst(simpledb.query.Constant)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeFirst</h4>
<pre>public&nbsp;void&nbsp;beforeFirst(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;searchkey)</pre>
<div class="block">Positions the index before the first index record
 having the specified search key.
 The method hashes the search key to determine the bucket,
 and then opens a table scan on the file
 corresponding to the bucket.
 The table scan for the previous bucket (if any) is closed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#beforeFirst(simpledb.query.Constant)">beforeFirst</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>searchkey</code> - the search key value.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#beforeFirst(simpledb.query.Constant)"><code>Index.beforeFirst(simpledb.query.Constant)</code></a></dd></dl>
</li>
</ul>
<a name="next()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>public&nbsp;boolean&nbsp;next()</pre>
<div class="block">Moves to the next record having the search key.
 The method loops through the table scan for the bucket,
 looking for a matching record, and returning false
 if there are no more such records.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#next()">next</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>false if no other index records have the search key.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#next()"><code>Index.next()</code></a></dd></dl>
</li>
</ul>
<a name="getDataRid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataRid</h4>
<pre>public&nbsp;<a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a>&nbsp;getDataRid()</pre>
<div class="block">Retrieves the dataRID from the current record
 in the table scan for the bucket.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#getDataRid()">getDataRid</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the dataRID stored in the current index record.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#getDataRid()"><code>Index.getDataRid()</code></a></dd></dl>
</li>
</ul>
<a name="insert(simpledb.query.Constant, simpledb.record.RID)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>public&nbsp;void&nbsp;insert(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;val,
          <a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a>&nbsp;rid)</pre>
<div class="block">Inserts a new record into the table scan for the bucket.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#insert(simpledb.query.Constant, simpledb.record.RID)">insert</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>val</code> - the dataval in the new index record.</dd><dd><code>rid</code> - the dataRID in the new index record.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#insert(simpledb.query.Constant, simpledb.record.RID)"><code>Index.insert(simpledb.query.Constant, simpledb.record.RID)</code></a></dd></dl>
</li>
</ul>
<a name="delete(simpledb.query.Constant, simpledb.record.RID)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(<a href="../../../simpledb/query/Constant.html" title="interface in simpledb.query">Constant</a>&nbsp;val,
          <a href="../../../simpledb/record/RID.html" title="class in simpledb.record">RID</a>&nbsp;rid)</pre>
<div class="block">Deletes the specified record from the table scan for
 the bucket.  The method starts at the beginning of the
 scan, and loops through the records until the
 specified record is found.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#delete(simpledb.query.Constant, simpledb.record.RID)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>val</code> - the dataval of the deleted index record</dd><dd><code>rid</code> - the dataRID of the deleted index record</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#delete(simpledb.query.Constant, simpledb.record.RID)"><code>Index.delete(simpledb.query.Constant, simpledb.record.RID)</code></a></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Closes the index by closing the current table scan.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../simpledb/index/Index.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../simpledb/index/Index.html" title="interface in simpledb.index">Index</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../simpledb/index/Index.html#close()"><code>Index.close()</code></a></dd></dl>
</li>
</ul>
<a name="searchCost(int, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>searchCost</h4>
<pre>public static&nbsp;int&nbsp;searchCost(int&nbsp;numblocks,
             int&nbsp;rpb)</pre>
<div class="block">Returns the cost of searching an index file having the
 specified number of blocks.
 The method assumes that all buckets are about the
 same size, and so the cost is simply the size of
 the bucket.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>numblocks</code> - the number of blocks of index records</dd><dd><code>rpb</code> - the number of records per block (not used here)</dd>
<dt><span class="strong">Returns:</span></dt><dd>the cost of traversing the index</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HashIndex.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?simpledb/index/hash/HashIndex.html" target="_top">Frames</a></li>
<li><a href="HashIndex.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
