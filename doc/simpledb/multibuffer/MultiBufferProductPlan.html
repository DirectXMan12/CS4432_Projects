<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Sat Feb 04 21:12:07 EST 2012 -->
<title>MultiBufferProductPlan</title>
<meta name="date" content="2012-02-04">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MultiBufferProductPlan";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MultiBufferProductPlan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../simpledb/multibuffer/ChunkScan.html" title="class in simpledb.multibuffer"><span class="strong">Prev Class</span></a></li>
<li><a href="../../simpledb/multibuffer/MultiBufferProductScan.html" title="class in simpledb.multibuffer"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?simpledb/multibuffer/MultiBufferProductPlan.html" target="_top">Frames</a></li>
<li><a href="MultiBufferProductPlan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb.multibuffer</div>
<h2 title="Class MultiBufferProductPlan" class="title">Class MultiBufferProductPlan</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.multibuffer.MultiBufferProductPlan</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MultiBufferProductPlan</span>
extends java.lang.Object
implements <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></pre>
<div class="block">The Plan class for the muti-buffer version of the
 <i>product</i> operator.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Edward Sciore</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#lhs">lhs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#rhs">rhs</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#schema">schema</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#tx">tx</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#MultiBufferProductPlan(simpledb.query.Plan, simpledb.query.Plan, simpledb.tx.Transaction)">MultiBufferProductPlan</a></strong>(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;lhs,
                      <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;rhs,
                      <a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</code>
<div class="block">Creates a product plan for the specified queries.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#blocksAccessed()">blocksAccessed</a></strong>()</code>
<div class="block">Returns an estimate of the number of block accesses
 required to execute the query.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../simpledb/materialize/TempTable.html" title="class in simpledb.materialize">TempTable</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#copyRecordsFrom(simpledb.query.Plan)">copyRecordsFrom</a></strong>(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#distinctValues(java.lang.String)">distinctValues</a></strong>(java.lang.String&nbsp;fldname)</code>
<div class="block">Estimates the distinct number of field values in the product.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../simpledb/query/Scan.html" title="interface in simpledb.query">Scan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#open()">open</a></strong>()</code>
<div class="block">A scan for this query is created and returned, as follows.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#recordsOutput()">recordsOutput</a></strong>()</code>
<div class="block">Estimates the number of output records in the product.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/multibuffer/MultiBufferProductPlan.html#schema()">schema</a></strong>()</code>
<div class="block">Returns the schema of the product,
 which is the union of the schemas of the underlying queries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="lhs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lhs</h4>
<pre>private&nbsp;<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a> lhs</pre>
</li>
</ul>
<a name="rhs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rhs</h4>
<pre>private&nbsp;<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a> rhs</pre>
</li>
</ul>
<a name="tx">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tx</h4>
<pre>private&nbsp;<a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a> tx</pre>
</li>
</ul>
<a name="schema">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>schema</h4>
<pre>private&nbsp;<a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a> schema</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MultiBufferProductPlan(simpledb.query.Plan, simpledb.query.Plan, simpledb.tx.Transaction)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MultiBufferProductPlan</h4>
<pre>public&nbsp;MultiBufferProductPlan(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;lhs,
                      <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;rhs,
                      <a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</pre>
<div class="block">Creates a product plan for the specified queries.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lhs</code> - the plan for the LHS query</dd><dd><code>rhs</code> - the plan for the RHS query</dd><dd><code>tx</code> - the calling transaction</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="open()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;<a href="../../simpledb/query/Scan.html" title="interface in simpledb.query">Scan</a>&nbsp;open()</pre>
<div class="block">A scan for this query is created and returned, as follows.
 First, the method materializes its RHS query.
 It then determines the optimal chunk size,
 based on the size of the materialized file and the
 number of available buffers.
 It creates a chunk plan for each chunk, saving them in a list.
 Finally, it creates a multiscan for this list of plans,
 and returns that scan.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#open()">open</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a scan</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#open()"><code>Plan.open()</code></a></dd></dl>
</li>
</ul>
<a name="blocksAccessed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksAccessed</h4>
<pre>public&nbsp;int&nbsp;blocksAccessed()</pre>
<div class="block">Returns an estimate of the number of block accesses
 required to execute the query. The formula is:
 <pre> B(product(p1,p2)) = B(p2) + B(p1)*C(p2) </pre>
 where C(p2) is the number of chunks of p2.
 The method uses the current number of available buffers
 to calculate C(p2), and so this value may differ
 when the query scan is opened.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#blocksAccessed()">blocksAccessed</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of block accesses</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#blocksAccessed()"><code>Plan.blocksAccessed()</code></a></dd></dl>
</li>
</ul>
<a name="recordsOutput()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordsOutput</h4>
<pre>public&nbsp;int&nbsp;recordsOutput()</pre>
<div class="block">Estimates the number of output records in the product.
 The formula is:
 <pre> R(product(p1,p2)) = R(p1)*R(p2) </pre></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#recordsOutput()">recordsOutput</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of output records</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#recordsOutput()"><code>Plan.recordsOutput()</code></a></dd></dl>
</li>
</ul>
<a name="distinctValues(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distinctValues</h4>
<pre>public&nbsp;int&nbsp;distinctValues(java.lang.String&nbsp;fldname)</pre>
<div class="block">Estimates the distinct number of field values in the product.
 Since the product does not increase or decrease field values,
 the estimate is the same as in the appropriate underlying query.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#distinctValues(java.lang.String)">distinctValues</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fldname</code> - the name of a field</dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of distinct field values in the output</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#distinctValues(java.lang.String)"><code>Plan.distinctValues(java.lang.String)</code></a></dd></dl>
</li>
</ul>
<a name="schema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>schema</h4>
<pre>public&nbsp;<a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a>&nbsp;schema()</pre>
<div class="block">Returns the schema of the product,
 which is the union of the schemas of the underlying queries.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#schema()">schema</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the query's schema</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#schema()"><code>Plan.schema()</code></a></dd></dl>
</li>
</ul>
<a name="copyRecordsFrom(simpledb.query.Plan)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>copyRecordsFrom</h4>
<pre>private&nbsp;<a href="../../simpledb/materialize/TempTable.html" title="class in simpledb.materialize">TempTable</a>&nbsp;copyRecordsFrom(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MultiBufferProductPlan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../simpledb/multibuffer/ChunkScan.html" title="class in simpledb.multibuffer"><span class="strong">Prev Class</span></a></li>
<li><a href="../../simpledb/multibuffer/MultiBufferProductScan.html" title="class in simpledb.multibuffer"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?simpledb/multibuffer/MultiBufferProductPlan.html" target="_top">Frames</a></li>
<li><a href="MultiBufferProductPlan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
