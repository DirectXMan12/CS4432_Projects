<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Sat Feb 04 21:12:07 EST 2012 -->
<title>MergeJoinPlan</title>
<meta name="date" content="2012-02-04">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MergeJoinPlan";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergeJoinPlan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../simpledb/materialize/MaxFn.html" title="class in simpledb.materialize"><span class="strong">Prev Class</span></a></li>
<li><a href="../../simpledb/materialize/MergeJoinScan.html" title="class in simpledb.materialize"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?simpledb/materialize/MergeJoinPlan.html" target="_top">Frames</a></li>
<li><a href="MergeJoinPlan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb.materialize</div>
<h2 title="Class MergeJoinPlan" class="title">Class MergeJoinPlan</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.materialize.MergeJoinPlan</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MergeJoinPlan</span>
extends java.lang.Object
implements <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></pre>
<div class="block">The Plan class for the <i>mergejoin</i> operator.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Edward Sciore</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#fldname1">fldname1</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#fldname2">fldname2</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#p1">p1</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#p2">p2</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#sch">sch</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#MergeJoinPlan(simpledb.query.Plan, simpledb.query.Plan, java.lang.String, java.lang.String, simpledb.tx.Transaction)">MergeJoinPlan</a></strong>(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p1,
             <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p2,
             java.lang.String&nbsp;fldname1,
             java.lang.String&nbsp;fldname2,
             <a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</code>
<div class="block">Creates a mergejoin plan for the two specified queries.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#blocksAccessed()">blocksAccessed</a></strong>()</code>
<div class="block">Returns the number of block acceses required to
 mergejoin the sorted tables.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#distinctValues(java.lang.String)">distinctValues</a></strong>(java.lang.String&nbsp;fldname)</code>
<div class="block">Estimates the distinct number of field values in the join.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../simpledb/query/Scan.html" title="interface in simpledb.query">Scan</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#open()">open</a></strong>()</code>
<div class="block">The method first sorts its two underlying scans
 on their join field.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#recordsOutput()">recordsOutput</a></strong>()</code>
<div class="block">Returns the number of records in the join.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a></code></td>
<td class="colLast"><code><strong><a href="../../simpledb/materialize/MergeJoinPlan.html#schema()">schema</a></strong>()</code>
<div class="block">Returns the schema of the join,
 which is the union of the schemas of the underlying queries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="p1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>p1</h4>
<pre>private&nbsp;<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a> p1</pre>
</li>
</ul>
<a name="p2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>p2</h4>
<pre>private&nbsp;<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a> p2</pre>
</li>
</ul>
<a name="fldname1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fldname1</h4>
<pre>private&nbsp;java.lang.String fldname1</pre>
</li>
</ul>
<a name="fldname2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fldname2</h4>
<pre>private&nbsp;java.lang.String fldname2</pre>
</li>
</ul>
<a name="sch">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sch</h4>
<pre>private&nbsp;<a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a> sch</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MergeJoinPlan(simpledb.query.Plan, simpledb.query.Plan, java.lang.String, java.lang.String, simpledb.tx.Transaction)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MergeJoinPlan</h4>
<pre>public&nbsp;MergeJoinPlan(<a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p1,
             <a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a>&nbsp;p2,
             java.lang.String&nbsp;fldname1,
             java.lang.String&nbsp;fldname2,
             <a href="../../simpledb/tx/Transaction.html" title="class in simpledb.tx">Transaction</a>&nbsp;tx)</pre>
<div class="block">Creates a mergejoin plan for the two specified queries.
 The RHS must be materialized after it is sorted, 
 in order to deal with possible duplicates.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>p1</code> - the LHS query plan</dd><dd><code>p2</code> - the RHS query plan</dd><dd><code>fldname1</code> - the LHS join field</dd><dd><code>fldname2</code> - the RHS join field</dd><dd><code>tx</code> - the calling transaction</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="open()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;<a href="../../simpledb/query/Scan.html" title="interface in simpledb.query">Scan</a>&nbsp;open()</pre>
<div class="block">The method first sorts its two underlying scans
 on their join field. It then returns a mergejoin scan
 of the two sorted table scans.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#open()">open</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a scan</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#open()"><code>Plan.open()</code></a></dd></dl>
</li>
</ul>
<a name="blocksAccessed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksAccessed</h4>
<pre>public&nbsp;int&nbsp;blocksAccessed()</pre>
<div class="block">Returns the number of block acceses required to
 mergejoin the sorted tables.
 Since a mergejoin can be preformed with a single
 pass through each table, the method returns
 the sum of the block accesses of the 
 materialized sorted tables.
 It does <i>not</i> include the one-time cost
 of materializing and sorting the records.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#blocksAccessed()">blocksAccessed</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of block accesses</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#blocksAccessed()"><code>Plan.blocksAccessed()</code></a></dd></dl>
</li>
</ul>
<a name="recordsOutput()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordsOutput</h4>
<pre>public&nbsp;int&nbsp;recordsOutput()</pre>
<div class="block">Returns the number of records in the join.
 Assuming uniform distribution, the formula is:
 <pre> R(join(p1,p2)) = R(p1)*R(p2)/max{V(p1,F1),V(p2,F2)}</pre></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#recordsOutput()">recordsOutput</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of output records</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#recordsOutput()"><code>Plan.recordsOutput()</code></a></dd></dl>
</li>
</ul>
<a name="distinctValues(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distinctValues</h4>
<pre>public&nbsp;int&nbsp;distinctValues(java.lang.String&nbsp;fldname)</pre>
<div class="block">Estimates the distinct number of field values in the join.
 Since the join does not increase or decrease field values,
 the estimate is the same as in the appropriate underlying query.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#distinctValues(java.lang.String)">distinctValues</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fldname</code> - the name of a field</dd>
<dt><span class="strong">Returns:</span></dt><dd>the estimated number of distinct field values in the output</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#distinctValues(java.lang.String)"><code>Plan.distinctValues(java.lang.String)</code></a></dd></dl>
</li>
</ul>
<a name="schema()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>schema</h4>
<pre>public&nbsp;<a href="../../simpledb/record/Schema.html" title="class in simpledb.record">Schema</a>&nbsp;schema()</pre>
<div class="block">Returns the schema of the join,
 which is the union of the schemas of the underlying queries.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../simpledb/query/Plan.html#schema()">schema</a></code>&nbsp;in interface&nbsp;<code><a href="../../simpledb/query/Plan.html" title="interface in simpledb.query">Plan</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the query's schema</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../simpledb/query/Plan.html#schema()"><code>Plan.schema()</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MergeJoinPlan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../simpledb/materialize/MaxFn.html" title="class in simpledb.materialize"><span class="strong">Prev Class</span></a></li>
<li><a href="../../simpledb/materialize/MergeJoinScan.html" title="class in simpledb.materialize"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?simpledb/materialize/MergeJoinPlan.html" target="_top">Frames</a></li>
<li><a href="MergeJoinPlan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
