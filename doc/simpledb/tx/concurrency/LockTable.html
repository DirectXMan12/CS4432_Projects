<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_02) on Sat Feb 04 21:12:07 EST 2012 -->
<title>LockTable</title>
<meta name="date" content="2012-02-04">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LockTable";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LockTable.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../simpledb/tx/concurrency/LockAbortException.html" title="class in simpledb.tx.concurrency"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?simpledb/tx/concurrency/LockTable.html" target="_top">Frames</a></li>
<li><a href="LockTable.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb.tx.concurrency</div>
<h2 title="Class LockTable" class="title">Class LockTable</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.tx.concurrency.LockTable</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre> class <span class="strong">LockTable</span>
extends java.lang.Object</pre>
<div class="block">The lock table, which provides methods to lock and unlock blocks.
 If a transaction requests a lock that causes a conflict with an
 existing lock, then that transaction is placed on a wait list.
 There is only one wait list for all blocks.
 When the last lock on a block is unlocked, then all transactions
 are removed from the wait list and rescheduled.
 If one of those transactions discovers that the lock it is waiting for
 is still locked, it will place itself back on the wait list.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Edward Sciore</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#locks">locks</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#MAX_TIME">MAX_TIME</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#LockTable()">LockTable</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#getLockVal(simpledb.file.Block)">getLockVal</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#hasOtherSLocks(simpledb.file.Block)">hasOtherSLocks</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#hasXlock(simpledb.file.Block)">hasXlock</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#sLock(simpledb.file.Block)">sLock</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>
<div class="block">Grants an SLock on the specified block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#unlock(simpledb.file.Block)">unlock</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>
<div class="block">Releases a lock on the specified block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#waitingTooLong(long)">waitingTooLong</a></strong>(long&nbsp;starttime)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../simpledb/tx/concurrency/LockTable.html#xLock(simpledb.file.Block)">xLock</a></strong>(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</code>
<div class="block">Grants an XLock on the specified block.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MAX_TIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_TIME</h4>
<pre>private static final&nbsp;long MAX_TIME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#simpledb.tx.concurrency.LockTable.MAX_TIME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="locks">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>locks</h4>
<pre>private&nbsp;java.util.Map&lt;<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>,java.lang.Integer&gt; locks</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LockTable()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LockTable</h4>
<pre>LockTable()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="sLock(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sLock</h4>
<pre>public&nbsp;void&nbsp;sLock(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
<div class="block">Grants an SLock on the specified block.
 If an XLock exists when the method is called,
 then the calling thread will be placed on a wait list
 until the lock is released.
 If the thread remains on the wait list for a certain 
 amount of time (currently 10 seconds),
 then an exception is thrown.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - a reference to the disk block</dd></dl>
</li>
</ul>
<a name="xLock(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>xLock</h4>
<pre>void&nbsp;xLock(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
<div class="block">Grants an XLock on the specified block.
 If a lock of any type exists when the method is called,
 then the calling thread will be placed on a wait list
 until the locks are released.
 If the thread remains on the wait list for a certain 
 amount of time (currently 10 seconds),
 then an exception is thrown.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - a reference to the disk block</dd></dl>
</li>
</ul>
<a name="unlock(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>void&nbsp;unlock(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
<div class="block">Releases a lock on the specified block.
 If this lock is the last lock on that block,
 then the waiting transactions are notified.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - a reference to the disk block</dd></dl>
</li>
</ul>
<a name="hasXlock(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasXlock</h4>
<pre>private&nbsp;boolean&nbsp;hasXlock(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
</li>
</ul>
<a name="hasOtherSLocks(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasOtherSLocks</h4>
<pre>private&nbsp;boolean&nbsp;hasOtherSLocks(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
</li>
</ul>
<a name="waitingTooLong(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitingTooLong</h4>
<pre>private&nbsp;boolean&nbsp;waitingTooLong(long&nbsp;starttime)</pre>
</li>
</ul>
<a name="getLockVal(simpledb.file.Block)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getLockVal</h4>
<pre>private&nbsp;int&nbsp;getLockVal(<a href="../../../simpledb/file/Block.html" title="class in simpledb.file">Block</a>&nbsp;blk)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LockTable.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../simpledb/tx/concurrency/LockAbortException.html" title="class in simpledb.tx.concurrency"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?simpledb/tx/concurrency/LockTable.html" target="_top">Frames</a></li>
<li><a href="LockTable.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
